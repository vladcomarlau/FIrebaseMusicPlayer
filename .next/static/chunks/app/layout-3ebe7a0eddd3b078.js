(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{347:()=>{},558:(e,t,a)=>{"use strict";a.d(t,{J:()=>l,MusicProvider:()=>i});var r=a(5155),s=a(2115),o=a(7481);let n=(0,s.createContext)(void 0),i=e=>{let{children:t}=e,[a,i]=(0,s.useState)([]),[l,d]=(0,s.useState)(null),[c,u]=(0,s.useState)(!1),[m,f]=(0,s.useState)([]),[v,g]=(0,s.useState)(.75),[p,S]=(0,s.useState)(0),[h,x]=(0,s.useState)(0),[b,y]=(0,s.useState)("name-asc"),[E,N]=(0,s.useState)(260),[w,k]=(0,s.useState)(!1),[A,T]=(0,s.useState)("none"),[I,j]=(0,s.useState)(!0),O=(0,s.useRef)(null),{toast:M}=(0,o.dj)(),C=(0,s.useMemo)(()=>[...a].sort((e,t)=>"name-asc"===b?e.name.localeCompare(t.name):t.name.localeCompare(e.name)),[a,b]),L=(0,s.useCallback)(()=>{y(e=>{let t="name-asc"===e?"name-desc":"name-asc";try{localStorage.setItem("musebox-sort",t)}catch(e){console.error("Failed to save sort to localStorage",e)}return t})},[]);(0,s.useEffect)(()=>{try{let e=localStorage.getItem("musebox-favorites");e&&f(JSON.parse(e));let t=localStorage.getItem("musebox-volume");if(t){let e=parseFloat(t);g(e),O.current&&(O.current.volume=e)}let a=localStorage.getItem("musebox-hue");a&&N(parseInt(a,10));let r=localStorage.getItem("musebox-shuffle");r&&k(JSON.parse(r));let s=localStorage.getItem("musebox-repeat");s&&T(s);let o=localStorage.getItem("musebox-sort");o&&y(o);let n=localStorage.getItem("musebox-sinewave");n&&j(JSON.parse(n))}catch(e){console.error("Failed to access localStorage",e)}},[]);let _=(0,s.useCallback)(e=>{g(e),O.current&&(O.current.volume=e);try{localStorage.setItem("musebox-volume",e.toString())}catch(e){console.error("Failed to save volume to localStorage",e)}},[]),P=(0,s.useCallback)(e=>{N(e);try{localStorage.setItem("musebox-hue",e.toString())}catch(e){console.error("Failed to save hue to localStorage",e)}},[]),R=(0,s.useCallback)(()=>{k(e=>{let t=!e;try{localStorage.setItem("musebox-shuffle",JSON.stringify(t))}catch(e){console.error("Failed to save shuffle state to localStorage",e)}return t})},[]),F=(0,s.useCallback)(()=>{T(e=>{let t;t="none"===e?"list":"list"===e?"song":"none";try{localStorage.setItem("musebox-repeat",t)}catch(e){console.error("Failed to save repeat state to localStorage",e)}return t})},[]),D=(0,s.useCallback)(()=>{j(e=>{let t=!e;try{localStorage.setItem("musebox-sinewave",JSON.stringify(t))}catch(e){console.error("Failed to save sine wave state to localStorage",e)}return t})},[]),H=(0,s.useCallback)(e=>{let t=a.find(t=>t.id===e)||C.find(t=>t.id===e);t&&(d(t),u(!0))},[a,C]),J=(0,s.useCallback)(()=>{l&&u(e=>!e)},[l]),U=(0,s.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C;if(l&&0!==e.length)if(w){let t;if(1===e.length)t=e[0];else{let a=e.filter(e=>e.id!==l.id);0===a.length&&(a=e);let r=Math.floor(Math.random()*a.length);t=a[r]}H(t.id)}else{let t=e.findIndex(e=>e.id===l.id);if(-1===t)H(e[0].id);else{let a=(t+1)%e.length;if(0===a&&"list"!==A)return void u(!1);H(e[a].id)}}},[l,C,w,A,H]),V=(0,s.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C;if(!l||0===e.length)return;let t=e.findIndex(e=>e.id===l.id);if(-1===t)H(e[0].id);else{let a=(t-1+e.length)%e.length;H(e[a].id)}},[l,C,H]),B=e=>{O.current&&(O.current.currentTime=e,S(e))},q=(0,s.useCallback)(()=>{"song"===A&&O.current?(O.current.currentTime=0,O.current.play()):U(C)},[A,U,C]);return(0,s.useEffect)(()=>{let e=O.current;e&&(l&&e.src!==l.url&&(e.src=l.url),c?e.play().catch(e=>console.error("Error playing audio:",e)):e.pause())},[c,l]),(0,s.useEffect)(()=>{let e=O.current;if(e){let t=()=>S(e.currentTime),a=()=>x(e.duration),r=()=>q(),s=()=>u(!0),o=()=>u(!1);return e.addEventListener("timeupdate",t),e.addEventListener("loadedmetadata",a),e.addEventListener("ended",r),e.addEventListener("play",s),e.addEventListener("pause",o),()=>{e.removeEventListener("timeupdate",t),e.removeEventListener("loadedmetadata",a),e.removeEventListener("ended",r),e.removeEventListener("play",s),e.removeEventListener("pause",o)}}},[q]),(0,s.useEffect)(()=>{"mediaSession"in navigator&&(l?(navigator.mediaSession.metadata=new MediaMetadata({title:l.name,artist:"MuseBox",album:"Music Player"}),navigator.mediaSession.playbackState=c?"playing":"paused"):(navigator.mediaSession.metadata=null,navigator.mediaSession.playbackState="none"))},[l,c]),(0,s.useEffect)(()=>{c&&l?document.title=l.name:document.title="MuseBox"},[l,c]),(0,s.useEffect)(()=>{if("mediaSession"in navigator)return navigator.mediaSession.setActionHandler("play",()=>J()),navigator.mediaSession.setActionHandler("pause",()=>J()),navigator.mediaSession.setActionHandler("nexttrack",()=>U(C)),navigator.mediaSession.setActionHandler("previoustrack",()=>V(C)),()=>{navigator.mediaSession.setActionHandler("play",null),navigator.mediaSession.setActionHandler("pause",null),navigator.mediaSession.setActionHandler("seekto",null),navigator.mediaSession.setActionHandler("nexttrack",null),navigator.mediaSession.setActionHandler("previoustrack",null),navigator.mediaSession.setActionHandler("seekforward",null),navigator.mediaSession.setActionHandler("seekbackward",null)}},[J,U,V,C,h,B]),(0,s.useEffect)(()=>()=>{a.forEach(e=>URL.revokeObjectURL(e.url))},[a]),(0,r.jsxs)(n.Provider,{value:{songs:a,sortedSongs:C,currentSong:l,isPlaying:c,favorites:m,volume:v,currentTime:p,duration:h,sort:b,hue:E,isShuffled:w,repeat:A,showSineWave:I,audioRef:O,loadSongs:e=>{if(!e)return;let t=Array.from(e).filter(e=>e.type.startsWith("audio/"));if(0===t.length)return void M({variant:"destructive",title:"No audio files found",description:"Please select a folder containing supported audio files (e.g., mp3, wav, ogg)."});i(t.map(e=>{let t=URL.createObjectURL(e);return{id:"".concat(e.name,"-").concat(e.size),file:e,name:e.name.replace(/\.[^/.]+$/,""),url:t}}))},playSong:H,togglePlayPause:J,playNext:U,playPrev:V,toggleFavorite:e=>{f(t=>{let a=t.includes(e)?t.filter(t=>t!==e):[...t,e];try{localStorage.setItem("musebox-favorites",JSON.stringify(a))}catch(e){console.error("Failed to save favorites to localStorage",e)}return a})},setVolume:_,seek:B,setSort:y,toggleSort:L,setHue:P,toggleShuffle:R,toggleRepeat:F,toggleSineWave:D},children:[t,(0,r.jsx)("audio",{ref:O,crossOrigin:"anonymous"})]})},l=()=>{let e=(0,s.useContext)(n);if(void 0===e)throw Error("useMusic must be used within a MusicProvider");return e}},1970:(e,t,a)=>{"use strict";a.d(t,{DynamicTheme:()=>i});var r=a(5155),s=a(558),o=a(2115),n=a(1362);function i(e){let{children:t}=e,{hue:a}=(0,s.J)(),{theme:i}=(0,n.D)();return(0,o.useEffect)(()=>{document.documentElement.style.setProperty("--hue",a.toString());let e="dark"===i||"system"===i&&window.matchMedia("(prefers-color-scheme: dark)").matches,t="hsl(".concat(a,", ").concat(e?"80%":"90%",", ").concat(e?"60%":"55%",")"),r=document.querySelector('meta[name="theme-color"]');r||((r=document.createElement("meta")).setAttribute("name","theme-color"),document.getElementsByTagName("head")[0].appendChild(r)),r.setAttribute("content",t)},[a,i]),(0,r.jsx)(r.Fragment,{children:t})}},2558:(e,t,a)=>{"use strict";a.d(t,{Toaster:()=>S});var r=a(5155),s=a(7481),o=a(2115),n=a(3057),i=a(2085),l=a(5318),d=a(9434);let c=n.Kq,u=o.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.LM,{ref:t,className:(0,d.cn)("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:top-auto sm:flex-col md:max-w-[420px]",a),...s})});u.displayName=n.LM.displayName;let m=(0,i.F)("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),f=o.forwardRef((e,t)=>{let{className:a,variant:s,...o}=e;return(0,r.jsx)(n.bL,{ref:t,className:(0,d.cn)(m({variant:s}),a),...o})});f.displayName=n.bL.displayName,o.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.rc,{ref:t,className:(0,d.cn)("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",a),...s})}).displayName=n.rc.displayName;let v=o.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.bm,{ref:t,className:(0,d.cn)("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",a),"toast-close":"",...s,children:(0,r.jsx)(l.A,{className:"h-4 w-4"})})});v.displayName=n.bm.displayName;let g=o.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.hE,{ref:t,className:(0,d.cn)("text-sm font-semibold",a),...s})});g.displayName=n.hE.displayName;let p=o.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.VY,{ref:t,className:(0,d.cn)("text-sm opacity-90",a),...s})});function S(){let{toasts:e}=(0,s.dj)();return(0,r.jsxs)(c,{children:[e.map(function(e){let{id:t,title:a,description:s,action:o,...n}=e;return(0,r.jsxs)(f,{...n,children:[(0,r.jsxs)("div",{className:"grid gap-1",children:[a&&(0,r.jsx)(g,{children:a}),s&&(0,r.jsx)(p,{children:s})]}),o,(0,r.jsx)(v,{})]},t)}),(0,r.jsx)(u,{})]})}p.displayName=n.VY.displayName},7280:(e,t,a)=>{"use strict";a.d(t,{ThemeProvider:()=>o});var r=a(5155);a(2115);var s=a(1362);function o(e){let{children:t,...a}=e;return(0,r.jsx)(s.N,{...a,children:t})}},7481:(e,t,a)=>{"use strict";a.d(t,{dj:()=>m});var r=a(2115);let s=0,o=new Map,n=(e,t)=>{if(o.has(e))return;let a=setTimeout(()=>{o.delete(e),c({type:"REMOVE_TOAST",toastId:e})},null!=t?t:5e3);o.set(e,a)},i=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:a}=t;return a?n(a):e.toasts.forEach(e=>{n(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===a||void 0===a?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},l=[],d={toasts:[]};function c(e){d=i(d,e),l.forEach(e=>{e(d)})}function u(e){let{...t}=e,a=(s=(s+1)%Number.MAX_SAFE_INTEGER).toString(),r=()=>c({type:"DISMISS_TOAST",toastId:a});return c({type:"ADD_TOAST",toast:{...t,id:a,open:!0,onOpenChange:e=>{e||r()}}}),{id:a,dismiss:r,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:a}})}}function m(){let[e,t]=r.useState(d);return r.useEffect(()=>(l.push(t),()=>{let e=l.indexOf(t);e>-1&&l.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},8922:(e,t,a)=>{Promise.resolve().then(a.t.bind(a,347,23)),Promise.resolve().then(a.bind(a,1970)),Promise.resolve().then(a.bind(a,7280)),Promise.resolve().then(a.bind(a,2558)),Promise.resolve().then(a.bind(a,558))},9434:(e,t,a)=>{"use strict";a.d(t,{a:()=>n,cn:()=>o});var r=a(2596),s=a(9688);function o(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,s.QP)((0,r.$)(t))}function n(e){if(isNaN(e)||e<0)return"00:00";let t=Math.floor(e/60),a=Math.floor(e%60);return"".concat(t.toString().padStart(2,"0"),":").concat(a.toString().padStart(2,"0"))}}},e=>{var t=t=>e(e.s=t);e.O(0,[690,894,718,441,684,358],()=>t(8922)),_N_E=e.O()}]);